import{a as C,e as O,r as p,j as e,P as M,f as d,M as N,h as B,b as T}from"./index-B5aJpQwO.js";import{u as k}from"./useQuery-DiLk-DaS.js";import{o as A}from"./api-DOR-wefx.js";import{L as f,C as l,a as r}from"./Card-BgyJxnnv.js";import{B as v,S as g}from"./Badge-Bb7NU6h0.js";import{E}from"./EmptyState-idfWPYnV.js";import{M as L}from"./Modal-B6DbCECy.js";import{c as D,C as I,B as q}from"./Button-CiOENXfr.js";import{E as F}from"./eye-BawcbnTh.js";import"./user-DVTd2ZHA.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=D("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);function J(){var u,y;const{userData:n}=C();O();const[t,j]=p.useState(null),[c,b]=p.useState(new Date().toISOString().split("T")[0]),[i,S]=p.useState(""),o=n==null?void 0:n.houseId,{data:x,isLoading:w}=k({queryKey:["houseOrders",o,c,i],queryFn:()=>A.getHouseOrders(o,{date:c||void 0,mealType:i||void 0}),enabled:!!o}),m=((u=x==null?void 0:x.data)==null?void 0:u.orders)||[],h=m.reduce((s,a)=>(s.count++,s.total+=a.totalAmount||0,a.status==="delivered"&&s.delivered++,s),{count:0,total:0,delivered:0});return w?e.jsx(f,{children:e.jsx(M,{})}):e.jsxs(f,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"House Orders"}),e.jsx("p",{className:"text-secondary-600 mt-1",children:"Track all orders from house members"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(l,{children:e.jsxs(r,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary-500",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:h.count})]})}),e.jsx(l,{children:e.jsxs(r,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary-500",children:"Delivered"}),e.jsx("p",{className:"text-2xl font-bold text-success-600",children:h.delivered})]})}),e.jsx(l,{children:e.jsxs(r,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary-500",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-primary-600",children:d(h.total)})]})})]}),e.jsx(l,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx("input",{type:"date",value:c,onChange:s=>b(s.target.value),className:"input w-40"}),e.jsxs("select",{value:i,onChange:s=>S(s.target.value),className:"input w-40",children:[e.jsx("option",{value:"",children:"All Meals"}),e.jsx("option",{value:"breakfast",children:"Breakfast"}),e.jsx("option",{value:"lunch",children:"Lunch"}),e.jsx("option",{value:"snacks",children:"Snacks"}),e.jsx("option",{value:"dinner",children:"Dinner"})]})]})})}),m.length===0?e.jsx(E,{icon:H,title:"No Orders Found",description:"No orders placed for the selected date"}):e.jsx("div",{className:"space-y-3",children:m.map(s=>{var a;return e.jsx(l,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:e.jsx(I,{className:"h-6 w-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-secondary-900",children:s.memberName}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-secondary-500",children:[e.jsx(v,{variant:"secondary",size:"sm",children:N[s.mealType]}),e.jsxs("span",{children:[((a=s.items)==null?void 0:a.length)||0," items"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-secondary-900",children:d(s.totalAmount)}),e.jsx("p",{className:"text-sm text-secondary-500",children:B(s.createdAt)})]}),e.jsx(g,{status:s.status}),e.jsx(q,{variant:"outline",size:"sm",onClick:()=>j(s),children:e.jsx(F,{className:"h-4 w-4"})})]})]})})},s.id)})})]}),e.jsx(L,{isOpen:!!t,onClose:()=>j(null),title:"Order Details",size:"md",children:t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-secondary-500",children:"Ordered By"}),e.jsx("p",{className:"font-medium",children:t.memberName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-secondary-500",children:"Meal"}),e.jsx(v,{variant:"secondary",children:N[t.mealType]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-secondary-500",children:"Date"}),e.jsx("p",{className:"font-medium",children:T(t.orderDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-secondary-500",children:"Status"}),e.jsx(g,{status:t.status})]})]}),e.jsxs("div",{className:"border-t border-secondary-200 pt-4",children:[e.jsx("h4",{className:"font-medium text-secondary-900 mb-3",children:"Items"}),e.jsx("div",{className:"space-y-2",children:(y=t.items)==null?void 0:y.map((s,a)=>e.jsxs("div",{className:"flex justify-between py-2 bg-secondary-50 px-3 rounded",children:[e.jsxs("span",{children:[s.name," Ã— ",s.quantity]}),e.jsx("span",{className:"font-medium",children:d(s.price*s.quantity)})]},a))})]}),e.jsx("div",{className:"border-t border-secondary-200 pt-4",children:e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"font-medium",children:"Total"}),e.jsx("span",{className:"font-bold text-primary-600",children:d(t.totalAmount)})]})}),t.notes&&e.jsxs("div",{className:"bg-secondary-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-secondary-500",children:"Notes"}),e.jsx("p",{className:"text-secondary-700",children:t.notes})]})]})})]})}export{J as default};

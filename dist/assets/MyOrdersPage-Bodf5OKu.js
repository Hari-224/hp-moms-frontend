import{a as v,r as g,j as e,P as D,O as w,b as C,M as b,h as E,f as m}from"./index-B5aJpQwO.js";import{u as O}from"./useQuery-DiLk-DaS.js";import{o as S}from"./api-DOR-wefx.js";import{L as x,C as p,a as u,S as M}from"./Card-BgyJxnnv.js";import{S as A}from"./Badge-Bb7NU6h0.js";import{E as L}from"./EmptyState-idfWPYnV.js";import{I as h}from"./Input-DSy_cLET.js";import{B as j}from"./Button-CiOENXfr.js";import{C as T}from"./calendar-CwUE91eJ.js";import"./user-DVTd2ZHA.js";function U(){var c;const{userData:q}=v(),[r,n]=g.useState({startDate:"",endDate:"",status:""}),{data:d,isLoading:y}=O({queryKey:["myOrders",r],queryFn:()=>S.getMyOrders(r)}),l=((c=d==null?void 0:d.data)==null?void 0:c.orders)||[],f=l.reduce((s,a)=>{const t=a.date;return s[t]||(s[t]=[]),s[t].push(a),s},{});return y?e.jsx(x,{children:e.jsx(D,{})}):e.jsx(x,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"My Orders"}),e.jsx("p",{className:"text-secondary-600 mt-1",children:"View your order history"})]}),e.jsx(p,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(h,{type:"date",placeholder:"Start Date",value:r.startDate,onChange:s=>n({...r,startDate:s.target.value}),className:"w-40"}),e.jsx(h,{type:"date",placeholder:"End Date",value:r.endDate,onChange:s=>n({...r,endDate:s.target.value}),className:"w-40"}),e.jsxs("select",{value:r.status,onChange:s=>n({...r,status:s.target.value}),className:"input w-40",children:[e.jsx("option",{value:"",children:"All Status"}),Object.entries(w).map(([s,a])=>e.jsx("option",{value:a,children:s},a))]}),e.jsx(j,{variant:"secondary",onClick:()=>n({startDate:"",endDate:"",status:""}),children:"Clear"})]})})}),l.length===0?e.jsx(L,{icon:M,title:"No Orders Found",description:"You haven't placed any orders yet. Start ordering delicious food!",action:e.jsx(j,{onClick:()=>window.location.href="/order",children:"Order Now"})}):e.jsx("div",{className:"space-y-6",children:Object.entries(f).sort(([s],[a])=>new Date(a)-new Date(s)).map(([s,a])=>e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-medium text-secondary-500 mb-3 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),C(s,"EEEE, dd MMMM yyyy")]}),e.jsx("div",{className:"space-y-3",children:a.map(t=>{var o;return e.jsx(p,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"inline-flex items-center gap-1 text-sm font-medium text-primary-600",children:b[t.mealType]}),e.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:E(t.createdAt)})]}),e.jsx(A,{status:t.status})]}),e.jsx("div",{className:"space-y-2 mb-3",children:(o=t.items)==null?void 0:o.map((i,N)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-secondary-600",children:[i.name," Ã— ",i.quantity]}),e.jsx("span",{className:"text-secondary-900",children:m(i.priceAtOrder*i.quantity)})]},N))}),e.jsxs("div",{className:"flex justify-between pt-3 border-t border-secondary-100",children:[e.jsx("span",{className:"font-medium text-secondary-900",children:"Total"}),e.jsx("span",{className:"font-bold text-primary-600",children:m(t.total)})]})]})},t.id)})})]},s))})]})})}export{U as default};

import{Z as j,a1 as W,j as s,d as f,a as F,a2 as X,u as P,L as z,R as o,c as N}from"./index-B5aJpQwO.js";import{c as u,C,B as T}from"./Button-CiOENXfr.js";import{U as $}from"./user-DVTd2ZHA.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=u("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=u("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=u("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=u("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=u("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=u("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=u("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=u("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=u("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=u("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=u("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=u("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=u("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=u("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),D=e=>{let a;const t=new Set,n=(m,c)=>{const x=typeof m=="function"?m(a):m;if(!Object.is(x,a)){const I=a;a=c??(typeof x!="object"||x===null)?x:Object.assign({},a,x),t.forEach(b=>b(a,I))}},l=()=>a,h={setState:n,getState:l,getInitialState:()=>y,subscribe:m=>(t.add(m),()=>t.delete(m))},y=a=e(n,l,h);return h},ie=(e=>e?D(e):D),ce=e=>e;function de(e,a=ce){const t=j.useSyncExternalStore(e.subscribe,j.useCallback(()=>a(e.getState()),[e,a]),j.useCallback(()=>a(e.getInitialState()),[e,a]));return j.useDebugValue(t),t}const G=e=>{const a=ie(e),t=n=>de(a,n);return Object.assign(t,a),t},_=(e=>e?G(e):G);function L(e,a){let t;try{t=e()}catch{return}return{getItem:l=>{var r;const p=y=>y===null?null:JSON.parse(y,void 0),h=(r=t.getItem(l))!=null?r:null;return h instanceof Promise?h.then(p):p(h)},setItem:(l,r)=>t.setItem(l,JSON.stringify(r,void 0)),removeItem:l=>t.removeItem(l)}}const R=e=>a=>{try{const t=e(a);return t instanceof Promise?t:{then(n){return R(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return R(n)(t)}}}},ue=(e,a)=>(t,n,l)=>{let r={storage:L(()=>localStorage),partialize:i=>i,version:0,merge:(i,S)=>({...S,...i}),...a},p=!1,h=0;const y=new Set,m=new Set;let c=r.storage;if(!c)return e((...i)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),t(...i)},n,l);const x=()=>{const i=r.partialize({...n()});return c.setItem(r.name,{state:i,version:r.version})},I=l.setState;l.setState=(i,S)=>(I(i,S),x());const b=e((...i)=>(t(...i),x()),n,l);l.getInitialState=()=>b;let v;const q=()=>{var i,S;if(!c)return;const M=++h;p=!1,y.forEach(d=>{var g;return d((g=n())!=null?g:b)});const k=((S=r.onRehydrateStorage)==null?void 0:S.call(r,(i=n())!=null?i:b))||void 0;return R(c.getItem.bind(c))(r.name).then(d=>{if(d)if(typeof d.version=="number"&&d.version!==r.version){if(r.migrate){const g=r.migrate(d.state,d.version);return g instanceof Promise?g.then(O=>[!0,O]):[!0,g]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,d.state];return[!1,void 0]}).then(d=>{var g;if(M!==h)return;const[O,J]=d;if(v=r.merge(J,(g=n())!=null?g:b),t(v,!0),O)return x()}).then(()=>{M===h&&(k==null||k(v,void 0),v=n(),p=!0,m.forEach(d=>d(v)))}).catch(d=>{M===h&&(k==null||k(void 0,d))})};return l.persist={setOptions:i=>{r={...r,...i},i.storage&&(c=i.storage)},clearStorage:()=>{c==null||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>q(),hasHydrated:()=>p,onHydrate:i=>(y.add(i),()=>{y.delete(i)}),onFinishHydration:i=>(m.add(i),()=>{m.delete(i)})},r.skipHydration||q(),v||b},V=ue,Q=_(V((e,a)=>({sidebarOpen:!0,setSidebarOpen:t=>e({sidebarOpen:t}),toggleSidebar:()=>e(t=>({sidebarOpen:!t.sidebarOpen})),theme:"light",setTheme:t=>{e({theme:t}),document.documentElement.classList.toggle("dark",t==="dark")},selectedAgencyId:null,setSelectedAgencyId:t=>e({selectedAgencyId:t}),selectedHouseId:null,setSelectedHouseId:t=>e({selectedHouseId:t}),activeDate:new Date().toISOString().split("T")[0],setActiveDate:t=>e({activeDate:t}),unreadCount:0,setUnreadCount:t=>e({unreadCount:t}),isOnline:navigator.onLine,setIsOnline:t=>e({isOnline:t})}),{name:"moms-storage",storage:L(()=>localStorage),partialize:e=>({theme:e.theme,sidebarOpen:e.sidebarOpen,selectedAgencyId:e.selectedAgencyId,selectedHouseId:e.selectedHouseId})})),be=_((e,a)=>({items:[],mealType:null,addItem:t=>{const{items:n}=a(),l=n.findIndex(r=>r.menuItemId===t.menuItemId);if(l>=0){const r=[...n];r[l].quantity+=t.quantity,e({items:r})}else e({items:[...n,t]})},updateQuantity:(t,n)=>{const{items:l}=a();n<=0?e({items:l.filter(r=>r.menuItemId!==t)}):e({items:l.map(r=>r.menuItemId===t?{...r,quantity:n}:r)})},removeItem:t=>{e({items:a().items.filter(n=>n.menuItemId!==t)})},setMealType:t=>e({mealType:t}),clearCart:()=>e({items:[],mealType:null}),getTotal:()=>a().items.reduce((t,n)=>t+n.price*n.quantity,0),getItemCount:()=>a().items.reduce((t,n)=>t+n.quantity,0)}));_(V((e,a)=>({queue:[],addToQueue:t=>{e({queue:[...a().queue,{...t,id:Date.now(),timestamp:new Date().toISOString()}]})},removeFromQueue:t=>{e({queue:a().queue.filter(n=>n.id!==t)})},clearQueue:()=>e({queue:[]}),getQueueLength:()=>a().queue.length}),{name:"moms-offline-queue",storage:L(()=>localStorage)}));const Y={xs:"h-6 w-6 text-xs",sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-sm",lg:"h-12 w-12 text-base",xl:"h-16 w-16 text-lg","2xl":"h-20 w-20 text-xl"},w=["bg-primary-500","bg-success-500","bg-warning-500","bg-danger-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"];function he(e){if(!e)return w[0];const a=e.charCodeAt(0)+(e.charCodeAt(1)||0);return w[a%w.length]}function Z({src:e,name:a,size:t="md",className:n,...l}){const r=W(a),p=he(a);return e?s.jsx("img",{src:e,alt:a||"Avatar",className:f("rounded-full object-cover",Y[t],n),...l}):s.jsx("div",{className:f("rounded-full flex items-center justify-center font-medium text-white",Y[t],p,n),...l,children:r})}const me=e=>{const a=[{icon:ae,label:"Dashboard",path:o.DASHBOARD}],t={[N.SYSTEM_ADMIN]:[{icon:E,label:"Agencies",path:o.ADMIN_AGENCIES},{icon:U,label:"Settings",path:"/admin/settings"}],[N.AGENCY_OWNER]:[{icon:E,label:"Houses",path:o.AGENCY_HOUSES},{icon:C,label:"Menu",path:o.AGENCY_MENU},{icon:A,label:"Orders",path:o.AGENCY_ORDERS},{icon:H,label:"Bills",path:o.AGENCY_BILLS},{icon:ee,label:"Payments",path:o.AGENCY_PAYMENTS},{icon:U,label:"Settings",path:o.AGENCY_SETTINGS}],[N.AGENCY_HELPER]:[{icon:E,label:"Houses",path:o.AGENCY_HOUSES},{icon:C,label:"Menu",path:o.AGENCY_MENU},{icon:A,label:"Orders",path:o.AGENCY_ORDERS}],[N.HOUSE_ADMIN]:[{icon:le,label:"Members",path:o.HOUSE_MEMBERS},{icon:A,label:"Orders",path:o.HOUSE_ORDERS},{icon:re,label:"Requests",path:o.HOUSE_REQUESTS},{icon:H,label:"Bills",path:o.HOUSE_BILLS},{icon:B,label:"Chat",path:o.CHAT}],[N.CUSTOMER]:[{icon:C,label:"Order Food",path:o.ORDER},{icon:te,label:"My Orders",path:o.MY_ORDERS},{icon:H,label:"My Bills",path:o.MY_BILLS},{icon:B,label:"Chat",path:o.CHAT}]};return[...a,...t[e]||[]]};function pe(){var m;const{userData:e,signOut:a}=F(),{sidebarOpen:t,setSidebarOpen:n,unreadCount:l}=Q(),r=X(),p=P(),h=me(e==null?void 0:e.role),y=async()=>{await a(),p(o.LOGIN)};return s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>n(!1)}),s.jsx("aside",{className:f("fixed top-0 left-0 z-50 h-screen w-64 bg-white border-r border-secondary-200 transform transition-transform duration-300 lg:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-secondary-200",children:[s.jsxs(z,{to:o.DASHBOARD,className:"flex items-center gap-2",children:[s.jsx(C,{className:"h-8 w-8 text-primary-600"}),s.jsx("span",{className:"text-xl font-bold text-secondary-900",children:"MOMS"})]}),s.jsx("button",{className:"lg:hidden text-secondary-400 hover:text-secondary-600",onClick:()=>n(!1),children:s.jsx(oe,{className:"h-6 w-6"})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:s.jsx("ul",{className:"space-y-1",children:h.map(c=>{const x=r.pathname===c.path||c.path!==o.DASHBOARD&&r.pathname.startsWith(c.path);return s.jsx("li",{children:s.jsxs(z,{to:c.path,className:f("flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",x?"bg-primary-50 text-primary-700":"text-secondary-600 hover:bg-secondary-50 hover:text-secondary-900"),onClick:()=>n(!1),children:[s.jsx(c.icon,{className:"h-5 w-5"}),c.label]})},c.path)})})}),s.jsxs("div",{className:"p-4 border-t border-secondary-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Z,{name:e==null?void 0:e.name,size:"md"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-secondary-900 truncate",children:e==null?void 0:e.name}),s.jsx("p",{className:"text-xs text-secondary-500 capitalize",children:(m=e==null?void 0:e.role)==null?void 0:m.replace("_"," ")})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(T,{variant:"ghost",size:"sm",className:"flex-1",onClick:()=>p(o.PROFILE),children:[s.jsx($,{className:"h-4 w-4 mr-1"}),"Profile"]}),s.jsx(T,{variant:"ghost",size:"sm",className:"text-danger-600 hover:bg-danger-50",onClick:y,children:s.jsx(se,{className:"h-4 w-4"})})]})]})]})})]})}function xe(){const{userData:e}=F(),{setSidebarOpen:a,unreadCount:t}=Q(),n=P();return s.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white border-b border-secondary-200 lg:ml-64",children:s.jsxs("div",{className:"flex items-center justify-between h-full px-4",children:[s.jsx("button",{className:"lg:hidden text-secondary-600 hover:text-secondary-900",onClick:()=>a(!0),children:s.jsx(ne,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[s.jsxs("button",{className:"relative p-2 text-secondary-600 hover:text-secondary-900 hover:bg-secondary-50 rounded-lg",onClick:()=>n("/notifications"),children:[s.jsx(K,{className:"h-5 w-5"}),t>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 flex items-center justify-center h-5 w-5 text-xs font-medium text-white bg-danger-500 rounded-full",children:t>9?"9+":t})]}),s.jsx("button",{className:"lg:hidden",onClick:()=>n(o.PROFILE),children:s.jsx(Z,{name:e==null?void 0:e.name,size:"sm"})})]})]})})}function ve({children:e}){return s.jsxs("div",{className:"min-h-screen bg-secondary-50",children:[s.jsx(pe,{}),s.jsxs("div",{className:"lg:ml-64",children:[s.jsx(xe,{}),s.jsx("main",{className:"p-4 md:p-6",children:e})]})]})}function Se({className:e,children:a,...t}){return s.jsx("div",{className:f("card",e),...t,children:a})}function Ne({className:e,children:a,...t}){return s.jsx("div",{className:f("px-6 py-4 border-b border-secondary-200",e),...t,children:a})}function ke({className:e,children:a,...t}){return s.jsx("h3",{className:f("text-lg font-semibold text-secondary-900",e),...t,children:a})}function je({className:e,children:a,...t}){return s.jsx("p",{className:f("text-sm text-secondary-500 mt-1",e),...t,children:a})}function Ce({className:e,children:a,...t}){return s.jsx("div",{className:f("px-6 py-4",e),...t,children:a})}export{Z as A,E as B,Se as C,ve as L,B as M,H as R,A as S,le as U,oe as X,Ce as a,Ne as b,ke as c,re as d,be as e,ee as f,je as g,K as h,se as i,Q as u};
